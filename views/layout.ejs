
<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="images/logo.jpg">
  <title>
    Login
  </title>
  <!--     Fonts and icons     -->
  <!-- Nucleo Icons -->
  <link href="/assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="/assets/css/nucleo-svg.css" rel="stylesheet" />
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/fontawesome 5.15.4/css/all.min.css">

  <!-- Font Awesome Icons -->
  <!-- CSS Files -->
  <link href="/assets/css/argon-dashboard.css?v=2.0.4" rel="stylesheet" />
  <link rel="stylesheet" href="/css/jquery.toast.css">
  
  <link rel="stylesheet" href="/css/sweetalert.css">


</head>

<body style="background-color: rgb(14, 235, 161);" class="login-page">

  
  <!--Afficher le toast-->
<div class="container" id="exampleModal">
</div>
  <section class="section section-shaped section-lg">
    <div class="shape shape-style-1 bg-gradient-default">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>
    <div class="container pt-lg-7">
      <div class="row justify-content-center">
        <div class="col-lg-5">
          <div class="card bg-secondary shadow border-0">
            <div class="card-header bg-white pb-5">
              <div class="text-muted text-center mb-3"><h1><small>Login</small></h1></div>
            </div>
            <div class="card-body px-lg-5 py-lg-5">
              <div class="text-center text-muted mb-4">
                <img src="images/logo.jpg" width="50" height="50">
              </div>
              <form role="form" action="/login" method="post" id="login" autocomplete="off">
                <div class="form-group mb-3">
                  <div class="input-group input-group-alternative">
                    <span class="input-group-text"><i class="fa fa-user  " aria-hidden="true"></i></span><input class="form-control" required placeholder="Nom d'utilisateur" name="username" type="text">
                  </div>
                </div>
                <div class="form-group focused">
                  <div class="input-group input-group-alternative">
                    
                      <span class="input-group-text"><i class="fa fa-key"  aria-hidden="true"></i></span>
                    
                    <input class="form-control" name="password" placeholder="Password" type="password" required>
                  </div>
                </div>
                <div class="custom-control custom-control-alternative custom-checkbox">
                  <input class="custom-control-input" id=" remember" name="remember" value="remember-me" type="checkbox">
                  <label class="custom-control-label" for=" remember"><span>Se souvenir de moi</span></label>
                </div>
                <div class="text-center">
                  <button type="submit" class="btn btn-primary my-4" >Connexion</button>
                </div>
                <div class="row mt-3">
                  <div class="col-6">
                    <a href="/pwd" class="text-light"><small>Mot de passe oublié?</small></a>
                  </div>
                  <div class="col-6 text-right">
                    <a href="/sign" class="text-light"><small>Créer un nouveau compte</small></a>
                  </div>
              </form>
            </div>
          </div>
          
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <script src="/js/jquery-3.7.1.min.js"></script>
  <script src="/js/jquery.toast.min.js"></script>
  <script src="/js/sweetalert.min.js"></script>
  
  <script>
    $(document).ready(function () {
      $('form').on('submit', function (event) {
        event.preventDefault();
        const username = $('input[name="username"]').val();
        const password = $('input[name="password"]').val();
        $.ajax({
          url: '/login',
          data: {
            username: username,
            password: password
          },
          method: 'POST',
          dataType: "json",
          success: function (response) {
            if (response.success == true) {
              $.toast({
                heading: 'Success',
                text: response.message,
                position: 'top-right',
                loaderBg: '#effff8',
                icon: 'success',
                hideAfter: 3500,
              });
              window.location.href = '/main';
            } else if (response.success == false) {
              $.toast({
                heading: 'Erreur',
                text: response.message,
                position: 'top-right',
                loaderBg: '#effff8',
                icon: 'error',
                hideAfter: 3500
              });
            }
          },
          error: function (xhr, status, error) {
            const errorMessage = JSON.parse(xhr.responseText).message;
            $.toast({
              heading: 'Erreur',
              text: errorMessage,
              position: 'top-right',
              loaderBg: '#effff8',
              icon: 'error',
              hideAfter: 3500
            });
          }
        });
      });
    });
    
    function showToast(message) {
      $.toast({
        heading: 'Success',
        text: message,
        position: 'top-right',
        loaderBg: '#effff8',
        icon: 'success',
        hideAfter: 3500,
      });
    }
    
    // Exemple d'utilisation
    const toastMessage = 'Bienvenue à notre plateforme';
    showToast(toastMessage);
  </script> 
  
  
  <script src="/assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="/assets/js/core/bootstrap.min.js" type="text/javascript"></script>

  <script>
    window.TrackJS &&
      TrackJS.install({
        token: "ee6fab19c5a04ac1a32a645abde4613a",
        application: ""
      });
  </script>
   
</body>

</html>